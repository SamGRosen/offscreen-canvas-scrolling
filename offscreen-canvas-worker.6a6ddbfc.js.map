{"version":3,"sources":["../scripts/utilities.js","../scripts/drawer.js","../scripts/base-canvas-drawer.js","../scripts/offscreen-canvas-worker.js"],"names":["scale","domain","range","domainLength","slope","intercept","x","loadShader","gl","type","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","console","error","getShaderInfoLog","deleteShader","initShaderProgram","vertexSource","fragmentSource","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","componentToHex","c","hex","toString","length","rgbToHex","r","g","b","parseInt","Number","createMessanger","clazz","self","e","data","drawer","receiveState","render","Drawer","canvas","width","height","minX","maxX","minY","maxY","currentXRange","currentYRange","count","controls","needsAnimation","BaseCanvasDrawer","ctx","getContext","lastFrame","requestAnimationFrame","animate","bind","tick","clearRect","scaleX","scaleY","currBoxWidth","trueBoxWidth","currBoxHeight","trueBoxHeight","gridStartX","gridEndX","gridStartY","gridEndY","currX","currY","fillStyle","scaleRed","scaleBlue","fillRect","Math","sqrt","value","cancelAnimationFrame","OffscreenBaseCanvasDrawer","postMessage","onmessage"],"mappings":"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","file":"offscreen-canvas-worker.6a6ddbfc.js","sourceRoot":"../src/pages","sourcesContent":["function scale(domain, range) {\n  const domainLength = domain[1] - domain[0];\n  const rangeLength = range[1] - range[0];\n  const slope = rangeLength / domainLength;\n  const intercept = range[1] - slope * domain[1];\n  return (x) => slope * x + intercept;\n}\n\nfunction loadShader(gl, type, source) {\n  const shader = gl.createShader(type);\n\n  gl.shaderSource(shader, source);\n\n  gl.compileShader(shader);\n\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    console.error(`Could not compile shader: ${gl.getShaderInfoLog(shader)}`);\n    gl.deleteShader(shader);\n    return null;\n  }\n  return shader;\n}\n\nfunction initShaderProgram(gl, vertexSource, fragmentSource) {\n  const vertexShader = loadShader(gl, gl.VERTEX_SHADER, vertexSource);\n  const fragmentShader = loadShader(gl, gl.FRAGMENT_SHADER, fragmentSource);\n\n  const shaderProgram = gl.createProgram();\n  gl.attachShader(shaderProgram, vertexShader);\n  gl.attachShader(shaderProgram, fragmentShader);\n  gl.linkProgram(shaderProgram);\n\n  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n    console.error(\n      `Unable to initialize the shader program: ${gl.getProgramInfoLog(\n        shaderProgram\n      )}`\n    );\n    return null;\n  }\n\n  return shaderProgram;\n}\n\nfunction componentToHex(c) {\n  var hex = c.toString(16);\n  return hex.length == 1 ? \"0\" + hex : hex;\n}\n\nfunction rgbToHex(r, g, b) {\n  return parseInt(\n    Number(\"0x\" + componentToHex(r) + componentToHex(g) + componentToHex(b)),\n    10\n  );\n}\n\nconst createMessanger = (clazz, self) => {\n  return (e) => {\n    switch (e.data.type) {\n      case \"init\":\n        self.drawer = new clazz(e.data);\n        break;\n      case \"state\":\n        self.drawer.receiveState(e.data);\n        break;\n      case \"render\":\n        self.drawer.receiveState(e.data);\n        self.drawer.render();\n        break;\n      default:\n        console.error(`Received unknown message type: ${e}`);\n    }\n  };\n};\n\nexport { scale, initShaderProgram, loadShader, rgbToHex, createMessanger };\n","class Drawer {\n  constructor(data) {\n    this.canvas = data.canvas;\n    this.width = data.canvas.width;\n    this.height = data.canvas.height;\n    this.receiveState(data);\n  }\n\n  receiveState(data) {\n    this.minX = data.minX;\n    this.maxX = data.maxX;\n    this.minY = data.minY;\n    this.maxY = data.maxY;\n    this.currentXRange = [...data.currentXRange];\n    this.currentYRange = [...data.currentYRange];\n    this.count = data.count;\n    this.controls = data.controls;\n\n    this.needsAnimation = true;\n  }\n\n  tick() {}\n\n  animate() {}\n\n  render() {}\n}\n\nexport default Drawer;\n","import { scale } from \"./utilities\";\nimport Drawer from \"./drawer\";\n\nclass BaseCanvasDrawer extends Drawer {\n  constructor(data) {\n    super(data);\n    this.ctx = this.canvas.getContext(\"2d\");\n  }\n\n  animate() {\n    if (!this.needsAnimation) {\n      this.lastFrame = requestAnimationFrame(this.animate.bind(this));\n      this.tick();\n      return;\n    }\n\n    this.ctx.clearRect(0, 0, this.width, this.height);\n\n    const scaleX = scale(this.currentXRange, [0, this.width]);\n    const scaleY = scale(this.currentYRange, [0, this.height]);\n\n    const currBoxWidth =\n      ((this.maxX - this.minX) /\n        (this.currentXRange[1] - this.currentXRange[0])) *\n      this.trueBoxWidth;\n\n    const currBoxHeight =\n      ((this.maxY - this.minY) /\n        (this.currentYRange[1] - this.currentYRange[0])) *\n      this.trueBoxHeight;\n\n    // Calculate where grid starts so we draw rectangles that are partially offscreen\n    const gridStartX =\n      this.currentXRange[0] -\n      (this.currentXRange[0] % this.trueBoxWidth) -\n      this.trueBoxWidth;\n    const gridEndX =\n      this.currentXRange[1] -\n      (this.currentXRange[1] % this.trueBoxWidth) +\n      this.trueBoxWidth;\n\n    const gridStartY =\n      this.currentYRange[0] -\n      (this.currentYRange[0] % this.trueBoxHeight) -\n      this.trueBoxWidth;\n    const gridEndY =\n      this.currentYRange[1] -\n      (this.currentYRange[1] % this.trueBoxHeight) +\n      this.trueBoxWidth;\n\n    // Only draw rectangles inside viewing window\n    for (let currX = gridStartX; currX < gridEndX; currX += this.trueBoxWidth) {\n      for (\n        let currY = gridStartY;\n        currY < gridEndY;\n        currY += this.trueBoxHeight\n      ) {\n        this.ctx.fillStyle = `rgb(\n          ${this.scaleRed(currY)},\n          0,\n          ${this.scaleBlue(currX)})`;\n        this.ctx.fillRect(\n          scaleX(currX),\n          scaleY(currY),\n          currBoxWidth,\n          currBoxHeight\n        );\n      }\n    }\n\n    this.needsAnimation = false;\n    this.lastFrame = requestAnimationFrame(this.animate.bind(this));\n    this.tick();\n  }\n\n  render() {\n    this.trueBoxWidth = (this.maxX - this.minX) / Math.sqrt(this.count.value);\n    this.trueBoxHeight = (this.maxY - this.minY) / Math.sqrt(this.count.value);\n    this.scaleBlue = scale([this.minX, this.maxX], [0, 256]);\n    this.scaleRed = scale([this.minY, this.maxY], [0, 256]);\n\n    if (this.lastFrame) {\n      // Avoid overlapping animation requests\n      cancelAnimationFrame(this.lastFrame);\n    }\n    this.needsAnimation = true;\n    this.animate();\n  }\n}\n\nexport default BaseCanvasDrawer;\n","import BaseCanvasDrawer from \"./base-canvas-drawer\";\nimport { createMessanger } from \"./utilities\";\n\nclass OffscreenBaseCanvasDrawer extends BaseCanvasDrawer {\n  tick() {\n    postMessage({ type: \"tick\" });\n  }\n}\n\nself.onmessage = createMessanger(OffscreenBaseCanvasDrawer, self);\n"]}